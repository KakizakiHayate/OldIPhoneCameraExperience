# 実装進捗管理

本ドキュメントは MVP 実装の現在の進捗を管理する。
Claudeは**実装を開始する前に必ずこのファイルを読み**、現在のPhaseとIssueの状態を把握すること。

---

## 現在のフェーズ

| 項目 | 値 |
|------|-----|
| **現在のPhase** | MVP後の追加機能開発 |
| **次に着手すべきIssue** | #66 ビデオプレビュー全画面化（PR #69 Open） |
| **完了テスト数** | 264 |
| **最終更新** | 2026-02-25 |

---

## Issue ステータス一覧

| Phase | Issue # | タイトル | ステータス | PR # | テスト数 |
|-------|---------|---------|-----------|------|---------|
| **Phase 1** | #1 | Core定数の実装 | ✅ 完了 | #21 | 7/7 |
| **Phase 1** | #2 | Model層の実装 | ✅ 完了 | #22 | 21/21 |
| **Phase 2** | #3 | FilterService — 暖色系色味（画角クロップはPhase 2に移動） | ✅ 完了 | #35 | 8/8 |
| **Phase 2** | #4 | CameraService — カメラ制御基盤 | ✅ 完了 | #35 | 6/6 |
| **Phase 2** | #5 | PhotoLibraryService — 写真保存・権限管理 | ✅ 完了 | #35 | 7/7 |
| **Phase 3** | #6 | MotionService — ジャイロ + 手ブレ | ✅ 完了 | #33 | 4/4 |
| **Phase 3** | #7 | CameraViewModel — 全Service結合 | ✅ 完了 | #34 | 14/14 |
| **Phase 4** | #8 | スキューモーフィズムUIコンポーネント | ✅ 完了 | #35 | 10/10 |
| **Phase 4** | #9 | シャッター演出 | ✅ 完了 | #35 | 2/2 |
| **Phase 4** | #10 | CameraPreview — リアルタイムフィルタープレビュー | ✅ 完了 | #35 | 0/0 |
| **Phase 5** | #11 | CameraScreen統合 + パーミッション管理 | ✅ 完了 | #36 | 4/4 |
| **Phase 6** | #12 | 実機テスト・チューニング・App Store準備 | ✅ 完了 | #37 | 0/0 |
| **Phase 7** | #40 | ズーム基盤 — CameraService + CameraViewModel | ✅ 完了 | #51 | 10/10 |
| **Phase 7** | #41 | ズームUI — ピンチジェスチャー + インジケーター | ✅ 完了 | #52 | 12/12 |
| **Phase 8** | #42 | 動画撮影基盤 — CameraService拡張 | ✅ 完了 | #53 | 17/17 |
| **Phase 8** | #43 | 動画フィルター後処理 — FilterService拡張 | ✅ 完了 | #54 | 11/11 |
| **Phase 8** | #44 | 動画撮影ViewModel + UI | ✅ 完了 | #55 | 23/22 |
| **Phase 9** | #45 | アスペクト比モデル + Service対応 | ✅ 完了 | #56 | 17/17 |
| **Phase 9** | #46 | アスペクト比UI | ✅ 完了 | #57 | 10/13 |
| **Phase 10** | #47 | フラッシュUI改善 + カメラ切替ボタン移動 | ✅ 完了 | #58 | 10/12 |
| **Phase 11** | #48 | PhotoEditorService | ✅ 完了 | #59 | 16/16 |
| **Phase 11** | #49 | トリミング機能 | ✅ 完了 | #60 | 15/15 |
| **Phase 11** | #50 | PhotoEditorViewModel + 編集画面UI | ✅ 完了 | #61 | 27/27 |
| **追加** | — | CameraScreenレイアウト刷新 + 0.5xズーム対応 | ✅ 完了 | #63 | — |
| **追加** | — | 動画の向き・音声・録画サウンド修正 | ✅ 完了 | #64 | — |
| **追加** | — | プレビューフリーズ解消（不要なVideoDataOutput削除） | ✅ 完了 | #65 | — |
| **追加** | #66 | ビデオモードのプレビュー全画面化 + UIオーバーレイ | 🔵 進行中 | #69 | — |
| **追加** | #67 | iPhone 6モード追加 — モデル切替 + フィルター/手ぶれ/解像度の差別化 | ✅ 完了 | #68 | — |

### 要件変更履歴

| 日付 | 変更内容 | 理由 |
|------|---------|------|
| 2026-02-15 | F2.2 画角クロップをPhase 2に移動 | Lanczosスケーリングの端の半透明ピクセルが手ブレシミュレーションで白い線として表示されるため |
| 2026-02-15 | 出力解像度の5MP制限をLanczos→CGAffineTransformに変更 | Lanczosのエッジアーティファクト回避のため、スケーリング手法を変更。解像度2592×1936（5MP）自体は維持 |
| 2026-02-15 | プレビューのアスペクト比を4:3→3:4に変更 | 縦持ち専用アプリでプレビューと撮影写真の範囲を一致させるため |

### ステータス凡例

| アイコン | 意味 |
|---------|------|
| 🔲 未着手 | まだ作業を開始していない |
| 🔵 進行中 | 現在実装中 |
| ✅ 完了 | PR がマージ済み |
| ⏸️ 保留 | スケジュールリスクにより後回し |

---

## Phase 依存関係（実装可否の判断に使用）

あるIssueに着手する前に、前提Issueがすべて ✅ 完了 であることを確認すること。

| Issue # | 前提Issue | 着手可能条件 |
|---------|-----------|-------------|
| #1 | なし | いつでも着手可能 |
| #2 | #1 | #1 が ✅ |
| #3 | #1, #2 | #1, #2 が ✅ |
| #4 | #1, #2 | #1, #2 が ✅ |
| #5 | #1, #2 | #1, #2 が ✅ |
| #6 | #1, #2 | #1, #2 が ✅ |
| #7 | #3, #4, #5, #6 | #3〜#6 すべて ✅ |
| #8 | #2 | #2 が ✅ |
| #9 | #2 | #2 が ✅ |
| #10 | #3, #4 | #3, #4 が ✅ |
| #11 | #7, #8, #9, #10 | #7〜#10 すべて ✅ |
| #12 | #11 | #11 が ✅ |

---

## 完了済みインフラ（実装Phaseの前提）

MVP実装の前提となるインフラ設定はすべて完了済み。

| PR # | タイトル | ステータス |
|------|---------|-----------|
| #5 | SwiftLint導入 | ✅ マージ済み |
| #6 | Makefile導入 | ✅ マージ済み |
| #7 | GitHub Actions CI導入 | ✅ マージ済み |
| #8 | Fastlane導入 | ✅ マージ済み |

---

## 更新ルール

このファイルは以下のタイミングで更新すること：

1. **Issue着手時**: ステータスを `🔵 進行中` に変更
2. **PR作成時**: PR # を記入
3. **PRマージ時**: ステータスを `✅ 完了` に変更、テスト数を更新
4. **Phase完了時**: 「現在のフェーズ」セクションを次のPhaseに更新
5. **Issue保留時**: ステータスを `⏸️ 保留` に変更、理由をメモ
