# 画面一覧（Screen List）

本ドキュメントはアプリの全画面を定義する。
[機能一覧（features.md）](features.md)および[OOUI設計（OOUI_DESIGN.md）](OOUI_DESIGN.md)に基づく。

---

## 画面サマリー

### MVP（Phase 1）

| # | 画面ID | 画面名 | OOUIビュー種別 | 対応オブジェクト | ファイルパス |
|---|--------|--------|---------------|----------------|-------------|
| 1 | S-1 | カメラ画面 | シングルビュー | Camera | `Views/Screens/CameraScreen.swift` |
| 2 | S-2 | 権限リクエスト画面 | — (システム) | — | OS標準ダイアログ |
| 3 | S-3 | 権限拒否画面 | — (状態) | — | `Views/Screens/PermissionDeniedView.swift` |

> MVPは実質**1画面構成**（カメラ画面）。権限関連はカメラ画面の状態バリエーションとして扱う。

### Phase 2

| # | 画面ID | 画面名 | OOUIビュー種別 | 対応オブジェクト | ファイルパス |
|---|--------|--------|---------------|----------------|-------------|
| 4 | S-4 | 機種選択画面 | コレクションビュー | CameraModel | `Views/Screens/CameraModelListScreen.swift` |
| 5 | S-5 | 機種詳細画面 | シングルビュー | CameraModel | `Views/Screens/CameraModelDetailScreen.swift` |
| 6 | S-6 | ギャラリー画面 | コレクションビュー | Photo / Video | `Views/Screens/GalleryScreen.swift` |
| 7 | S-7 | 写真詳細画面 | シングルビュー | Photo | `Views/Screens/PhotoDetailScreen.swift` |
| 8 | S-8 | 動画再生画面 | シングルビュー | Video | `Views/Screens/VideoPlayerScreen.swift` |

---

## S-1 カメラ画面（メイン画面）

アプリの中核。ユーザーが滞在する唯一の画面（MVP）。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-1 |
| **OOUIオブジェクト** | Camera（シングルビュー） |
| **表示タイミング** | アプリ起動後（カメラ権限許可済みの場合） |
| **画面の向き** | ポートレート固定 |
| **ステータスバー** | 非表示 |
| **関連機能** | F1.1〜F1.4, F2.1〜F2.3, F3.1〜F3.5, F4.1〜F4.3 |

### レイアウト

```
┌─────────────────────────────────────┐
│          セーフエリア上端             │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ A. トップツールバー (F3.1)      │ │  高さ: 約44pt
│ │ [⚡ フラッシュ]     [🔄 カメラ]  │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │                                 │ │
│ │    B. ファインダー (F3.2)       │ │  4:3 アスペクト比
│ │    リアルタイムプレビュー         │ │  フィルター適用済み
│ │    (F1.1 + F2.1 + F2.2)        │ │
│ │                                 │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ C. ボトムツールバー (F3.4)      │ │  高さ: 約96pt
│ │                                 │ │
│ │ [📷 サムネ]    [◉ シャッター]   │ │
│ │  (F3.5)        (F3.3)          │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│          セーフエリア下端             │
└─────────────────────────────────────┘
```

### コンポーネント詳細

| 領域 | コンポーネント | 機能ID | ファイルパス |
|------|--------------|--------|-------------|
| A | トップツールバー | F3.1 | `Views/Components/Skeuomorphic/TopToolbar.swift` |
| A-左 | フラッシュトグル | F1.3 | `Views/Components/Camera/FlashToggle.swift` |
| A-右 | カメラ位置切替 | F1.4 | `Views/Components/Camera/CameraPositionToggle.swift` |
| B | ファインダー | F3.2 | `Views/Components/Camera/CameraPreview.swift` |
| B (overlay) | 虹彩シャッター | F4.1 | `Views/Components/Skeuomorphic/IrisShutter.swift` |
| B (overlay) | 白フェード | F4.3 | `CameraScreen.swift` 内で実装 |
| C | ボトムツールバー | F3.4 | `Views/Components/Skeuomorphic/BottomToolbar.swift` |
| C-左 | サムネイル | F3.5 | `Views/Components/Camera/PhotoThumbnail.swift` |
| C-中央 | シャッターボタン | F3.3 | `Views/Components/Skeuomorphic/ShutterButton.swift` |

### 状態バリエーション

#### S-1a: 通常状態（背面カメラ）

- デフォルト状態。アプリ起動直後
- フラッシュ: オフ（デフォルト）、フラッシュボタン表示
- ファインダー: 背面カメラのリアルタイムプレビュー + フィルター適用
- サムネイル: 直近撮影写真（なければ空枠）

#### S-1b: 通常状態（前面カメラ）

- カメラ切替後の状態
- **フラッシュボタン非表示**（前面カメラにフラッシュなし）
- ファインダー: 前面カメラのリアルタイムプレビュー + フィルター適用
- その他はS-1aと同じ

#### S-1c: 撮影中

- シャッターボタンタップ後〜保存完了まで
- **シャッターボタン無効化**（連続撮影防止）
- ファインダー上に虹彩シャッターアニメーション（F4.1）
- 白フェード演出（F4.3）
- シャッター音再生（F4.2）
- 所要時間: 約0.5秒（アニメーション）+ 撮影・保存処理（1秒以内）

#### S-1d: フラッシュオン

- フラッシュトグルで切り替え後
- フラッシュボタンのアイコンがハイライト表示
- 撮影時にフラッシュ発光

#### S-1e: カメラ切替アニメーション中

- カメラ切替ボタンタップ後の遷移アニメーション中
- フリップアニメーション表示
- アニメーション完了後、S-1aまたはS-1bに遷移

### アクセシビリティ

| 要素 | アクセシビリティラベル | トレイト |
|------|---------------------|---------|
| フラッシュボタン | 「フラッシュ [オン/オフ]」 | `.toggleButton` |
| カメラ切替ボタン | 「カメラ切り替え [背面/前面]」 | `.button` |
| シャッターボタン | 「シャッター」 / 撮影中: 「撮影中」 | `.button` |
| サムネイル | 「最近の写真を表示」 / 空: 「写真なし」 | `.button`, `.image` |
| ファインダー | 「カメラプレビュー」 | `.image` |

---

## S-2 権限リクエスト画面（システムダイアログ）

OS標準の権限リクエストダイアログ。アプリ側でUIは制御しない。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-2 |
| **種別** | システムダイアログ（カスタマイズ不可） |
| **表示タイミング** | カメラ権限: アプリ初回起動時 / フォトライブラリ権限: 初回撮影時 |
| **関連機能** | F5.1 |

### ダイアログ内容

#### S-2a: カメラアクセス許可

| 項目 | 内容 |
|------|------|
| **Purpose String** | `iPhone 4風のレトロな写真を撮影するためにカメラを使用します` |
| **Info.plist キー** | `NSCameraUsageDescription` |
| **ボタン** | 「許可」「許可しない」（OS標準） |
| **許可時の遷移** | → S-1（カメラ画面） |
| **拒否時の遷移** | → S-3（権限拒否画面） |

#### S-2b: フォトライブラリアクセス許可

| 項目 | 内容 |
|------|------|
| **Purpose String** | `撮影した写真をカメラロールに保存します` |
| **Info.plist キー** | `NSPhotoLibraryAddUsageDescription` |
| **ボタン** | 「許可」「許可しない」（OS標準） |
| **許可時の動作** | 撮影・保存処理を続行 |
| **拒否時の動作** | 保存失敗 → S-3c（フォトライブラリ権限拒否アラート）表示 |

---

## S-3 権限拒否画面

カメラまたはフォトライブラリの権限が拒否されている場合に表示する。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-3 |
| **OOUIオブジェクト** | — |
| **表示タイミング** | カメラ権限拒否時: カメラ画面の代わりに表示 / フォトライブラリ権限拒否時: アラートとして表示 |
| **関連機能** | F5.1 |

### 状態バリエーション

#### S-3a: カメラ権限拒否（全画面）

カメラ権限が拒否されている場合、カメラプレビューが表示できないため、ファインダー領域にメッセージを表示する。

```
┌─────────────────────────────────────┐
│ ┌─────────────────────────────────┐ │
│ │ トップツールバー（グレーアウト）   │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │    📷                           │ │
│ │    カメラへのアクセスが          │ │
│ │    許可されていません            │ │
│ │                                 │ │
│ │    設定アプリからカメラへの       │ │
│ │    アクセスを許可してください     │ │
│ │                                 │ │
│ │    [設定を開く]                  │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ ボトムツールバー（グレーアウト）   │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

| 要素 | 詳細 |
|------|------|
| 背景 | 黒（ファインダー領域） |
| アイコン | カメラアイコン（グレー） |
| メッセージ | 「カメラへのアクセスが許可されていません」 |
| サブメッセージ | 「設定アプリからカメラへのアクセスを許可してください」 |
| ボタン | 「設定を開く」→ `UIApplication.openSettingsURLString` |
| ツールバー | グレーアウト（操作不可） |

#### S-3b: カメラ権限「未決定」（初回起動前）

- アプリ起動直後、権限リクエスト前の一瞬の状態
- ファインダー領域は黒背景（プレビューなし）
- 即座にS-2a（カメラ権限ダイアログ）を表示する

#### S-3c: フォトライブラリ権限拒否（アラート）

撮影後の保存時にフォトライブラリ権限が拒否されている場合、アラートで表示する。

| 要素 | 内容 |
|------|------|
| タイトル | 「写真を保存できません」 |
| メッセージ | 「設定アプリからフォトライブラリへのアクセスを許可してください」 |
| ボタン1 | 「設定を開く」→ 設定アプリを開く |
| ボタン2 | 「キャンセル」（デフォルト・太字） |

---

## S-4 機種選択画面（Phase 2）

再現するiPhone機種を選択するコレクションビュー。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-4 |
| **OOUIオブジェクト** | CameraModel（コレクションビュー） |
| **表示タイミング** | カメラ画面から機種切替ボタンタップ時 |
| **表示形式** | シート（medium detent → large detent） |
| **関連機能** | Phase 2: 複数機種切替 |

### レイアウト

```
┌─────────────────────────────────────┐
│ ─── グラバー ───                     │
├─────────────────────────────────────┤
│ 機種を選択               [✕ 閉じる]  │
├─────────────────────────────────────┤
│ ┌───────┐ ┌───────┐ ┌───────┐      │
│ │       │ │       │ │       │      │
│ │ [img] │ │ [img] │ │ [img] │      │
│ │       │ │       │ │       │      │
│ │iPhone4│ │  5s   │ │   6   │  ... │
│ │ 2010  │ │ 2013  │ │ 2014  │      │
│ │  ✓    │ │  🔒   │ │  🔒   │      │
│ └───────┘ └───────┘ └───────┘      │
│                                     │
│ ※横スクロールまたはグリッド           │
└─────────────────────────────────────┘
```

### コンポーネント詳細

| 要素 | 説明 |
|------|------|
| セルのサムネイル | CameraModel.thumbnail（各機種の代表画像） |
| 機種名 | CameraModel.name（"iPhone 4"等） |
| 発売年 | CameraModel.year |
| 選択状態 | 現在適用中の機種に✓マーク |
| ロック表示 | CameraModel.isPurchased == false の場合🔒 |

### 状態バリエーション

| 状態 | 説明 |
|------|------|
| S-4a: 通常 | 機種一覧が表示される。現在の機種に✓ |
| S-4b: 購入済み機種タップ | 即座に選択 → シート閉じる → カメラ画面に反映 |
| S-4c: 未購入機種タップ | → S-5（機種詳細画面）へ遷移、購入フロー |

### アクセシビリティ

| 要素 | アクセシビリティラベル | トレイト |
|------|---------------------|---------|
| 機種セル | 「[機種名], [年], [選択中/ロック中]」 | `.button` |
| 閉じるボタン | 「閉じる」 | `.button` |

---

## S-5 機種詳細画面（Phase 2）

機種の詳細情報とフィルタープレビューを表示するシングルビュー。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-5 |
| **OOUIオブジェクト** | CameraModel（シングルビュー） |
| **表示タイミング** | 機種選択画面（S-4）で未購入機種をタップ時 |
| **表示形式** | シート内でのプッシュ遷移 |

### レイアウト

```
┌─────────────────────────────────────┐
│ [< 戻る]  iPhone 5s      [選択/購入] │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │   フィルタープレビュー            │ │  現在のカメラ映像に
│ │   （リアルタイム比較）            │ │  この機種のフィルターを適用
│ │                                 │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 機種情報                             │
│ ・発売年: 2013                       │
│ ・カメラ: 8MP                        │
│ ・iOS: 7〜12                        │
│ ・特徴: フラットデザイン初期          │
├─────────────────────────────────────┤
│ UIテーマプレビュー                    │
│ [iOS 7風UIのスクリーンショット]       │
└─────────────────────────────────────┘
```

### 状態バリエーション

| 状態 | 説明 |
|------|------|
| S-5a: 購入済み | 右上ボタンが「選択」 → タップでカメラに適用、シート閉じる |
| S-5b: 未購入 | 右上ボタンが「¥XXXで購入」 → App内課金フロー |
| S-5c: 購入処理中 | ボタンがローディング状態 |

---

## S-6 ギャラリー画面（Phase 2）

アプリで撮影した写真・動画のコレクションビュー。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-6 |
| **OOUIオブジェクト** | Photo / Video（コレクションビュー） |
| **表示タイミング** | タブバー「ギャラリー」タップ、またはカメラ画面のサムネイルタップ |
| **表示形式** | フルスクリーン（タブバーつき） |

### レイアウト

```
┌─────────────────────────────────────┐
│ ギャラリー              [機種フィルタ] │
├─────────────────────────────────────┤
│ ┌──┐ ┌──┐ ┌──┐ ┌──┐               │
│ │📷│ │📷│ │🎥│ │📷│               │
│ │  │ │  │ │5s│ │  │  3列グリッド   │
│ └──┘ └──┘ └──┘ └──┘               │
│ ┌──┐ ┌──┐ ┌──┐ ┌──┐               │
│ │📷│ │📷│ │📷│ │🎥│               │
│ │  │ │  │ │  │ │3s│               │
│ └──┘ └──┘ └──┘ └──┘               │
│                                     │
│            ...                      │
│                                     │
├─────────────────────────────────────┤
│ [📷 カメラ] [📱 機種] [🖼 ギャラリー] │
└─────────────────────────────────────┘
```

### コンポーネント詳細

| 要素 | 説明 |
|------|------|
| グリッドセル | Photo.image または Video.thumbnail のサムネイル |
| 動画バッジ | 動画セルの右下に再生時間（Video.duration）を表示 |
| 機種フィルタ | CameraModelで絞り込み（ドロップダウン/セグメント） |
| 並び順 | 新しい順（Gallery.sortOrder = .newest） |

### 状態バリエーション

| 状態 | 説明 |
|------|------|
| S-6a: 通常 | 写真・動画がグリッド表示される |
| S-6b: 空 | 撮影した写真がない。中央に「まだ写真がありません。カメラで撮影してみましょう」と表示 |
| S-6c: フィルタリング中 | 特定のCameraModelで絞り込んだ状態 |

### アクセシビリティ

| 要素 | アクセシビリティラベル | トレイト |
|------|---------------------|---------|
| 写真セル | 「写真, [撮影日時], [機種名]」 | `.button`, `.image` |
| 動画セル | 「動画, [再生時間], [撮影日時]」 | `.button`, `.image` |

---

## S-7 写真詳細画面（Phase 2）

写真1枚をフルスクリーンで表示するシングルビュー。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-7 |
| **OOUIオブジェクト** | Photo（シングルビュー） |
| **表示タイミング** | ギャラリー画面（S-6）で写真セルをタップ時 |
| **表示形式** | フルスクリーン（プッシュ遷移） |

### レイアウト

```
┌─────────────────────────────────────┐
│ [< 戻る]                    [共有 ↗] │
├─────────────────────────────────────┤
│                                     │
│                                     │
│           写真フルスクリーン表示       │
│           （ピンチズーム対応）         │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ 撮影情報                             │
│ 📅 2026/02/12 15:30                 │
│ 📱 iPhone 4 モデル                   │
│ ⚡ フラッシュ: オン                   │
└─────────────────────────────────────┘
```

### アクション

| アクション | UIトリガー | 説明 |
|---|---|---|
| share() | 右上「共有」ボタン | OSのシェアシートを表示 |
| ズーム | ピンチジェスチャー | 写真を拡大/縮小 |
| 戻る | 左上「戻る」/ スワイプバック | ギャラリーに戻る |

---

## S-8 動画再生画面（Phase 2）

動画をフルスクリーンで再生するシングルビュー。

### 基本情報

| 項目 | 内容 |
|------|------|
| **画面ID** | S-8 |
| **OOUIオブジェクト** | Video（シングルビュー） |
| **表示タイミング** | ギャラリー画面（S-6）で動画セルをタップ時 |
| **表示形式** | フルスクリーン（プッシュ遷移） |

### レイアウト

```
┌─────────────────────────────────────┐
│ [< 戻る]                    [共有 ↗] │
├─────────────────────────────────────┤
│                                     │
│                                     │
│           動画フルスクリーン再生       │
│                                     │
│           [▶ / ⏸ 再生/一時停止]      │
│                                     │
├─────────────────────────────────────┤
│ advancement──────●──── 00:15 / 00:30│
├─────────────────────────────────────┤
│ 撮影情報                             │
│ 📅 2026/02/12 15:30                 │
│ 📱 iPhone 4 モデル                   │
└─────────────────────────────────────┘
```

### アクション

| アクション | UIトリガー | 説明 |
|---|---|---|
| play() / pause() | 再生/一時停止ボタン または 画面タップ | 動画の再生制御 |
| share() | 右上「共有」ボタン | OSのシェアシートを表示 |
| シーク | プログレスバードラッグ | 再生位置の変更 |
| 戻る | 左上「戻る」/ スワイプバック | ギャラリーに戻る |

---

## 画面遷移図

### MVP

```
                    ┌─────────────┐
                    │  アプリ起動   │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │ 権限チェック  │
                    └──────┬──────┘
                           │
              ┌────────────┼────────────┐
              │            │            │
       ┌──────▼──────┐     │     ┌──────▼──────┐
       │  S-3b       │     │     │  S-3a       │
       │  未決定      │     │     │  権限拒否    │
       └──────┬──────┘     │     └──────┬──────┘
              │            │            │
       ┌──────▼──────┐     │     ┌──────▼──────┐
       │  S-2a       │     │     │  設定アプリ   │
       │  権限ダイアログ│     │     │  （外部）    │
       └──────┬──────┘     │     └──────┬──────┘
              │            │            │
              │  許可       │            │  戻る
              ├────────────┤            │
              │            │            │
       ┌──────▼────────────▼────────────▼──┐
       │                                   │
       │           S-1 カメラ画面           │
       │                                   │
       │   [フラッシュ切替] [カメラ切替]      │
       │   [ファインダー]                    │
       │   [サムネイル] [シャッター]          │
       │                                   │
       └─────────────┬─────────────────────┘
                     │ サムネイルタップ
              ┌──────▼──────┐
              │  カメラロール │
              │  （OS外部）  │
              └─────────────┘
```

### Phase 2

```
┌──────────────────────────────────────────────────┐
│                    タブバー                       │
│                                                  │
│   📷 カメラ        📱 機種        🖼 ギャラリー   │
│     │                │                │          │
│     ▼                ▼                ▼          │
│  ┌──────┐      ┌──────────┐     ┌──────────┐    │
│  │ S-1  │      │   S-4    │     │   S-6    │    │
│  │カメラ │ ←選択─┤機種選択  │     │ギャラリー │    │
│  │      │      │(collection)│    │(collection)│   │
│  └──────┘      └────┬─────┘     └──┬───┬───┘    │
│                     │              │   │        │
│                     ▼              ▼   ▼        │
│               ┌──────────┐  ┌──────┐ ┌──────┐   │
│               │   S-5    │  │ S-7  │ │ S-8  │   │
│               │機種詳細  │  │写真  │ │動画  │   │
│               │(single)  │  │詳細  │ │再生  │   │
│               └──────────┘  └──────┘ └──────┘   │
└──────────────────────────────────────────────────┘
```

---

## 画面数サマリー

| フェーズ | 画面数 | 内訳 |
|---------|--------|------|
| MVP | **1画面** + 2状態画面 | カメラ(S-1) + 権限ダイアログ(S-2, OS) + 権限拒否(S-3) |
| Phase 2 | **+5画面** | 機種選択(S-4) + 機種詳細(S-5) + ギャラリー(S-6) + 写真詳細(S-7) + 動画再生(S-8) |
| 合計 | **8画面** | — |
