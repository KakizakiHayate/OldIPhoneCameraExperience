# Human Interface Guidelines（プロジェクト適用版）

本ドキュメントは、Apple Human Interface Guidelines（HIG）をこのプロジェクト固有の要件に合わせて整理したものである。
本アプリはiOS 4〜6時代のスキューモーフィズムUIを意図的に再現するため、現行HIGの「ビジュアルデザイン」から大幅に逸脱する。一方で、アクセシビリティ・プライバシー・パフォーマンス・システムジェスチャーなどは現行HIGに準拠する必要がある。

---

## 凡例

- **準拠** — 現行HIGに従う（逸脱しない）
- **逸脱** — プロジェクトの意図として現行HIGから外れる。理由を明記
- **一部準拠** — 基本方針は従うが、レトロUI再現のため部分的に調整

---

## 1. アクセシビリティ【準拠】

レトロUIであっても、アクセシビリティは妥協しない。Apple審査でも重視される領域。

### 1.1 VoiceOver

- すべてのインタラクティブ要素（シャッターボタン、フラッシュ切替、カメラ切替、サムネイル）に**アクセシビリティラベル**を付与する
- ラベルは「見た目」ではなく「目的」を記述する
  - 良い例: `「シャッター」` `「フラッシュ オフ」` `「前面カメラに切り替え」`
  - 悪い例: `「丸いボタン」` `「左のアイコン」`
- 装飾的な要素（テクスチャ背景、ベベル、グラデーション）はVoiceOverから隠す（`accessibilityElementsHidden = true`）
- アクセシビリティトレイトを正しく設定する（`.button`、`.image`、`.toggleButton`等）
- フラッシュのオン/オフ状態はVoiceOverで読み上げられること

### 1.2 タッチターゲット

- **最小44×44pt**を厳守する
- 本アプリの主要ボタン（シャッター、フラッシュ、カメラ切替、サムネイル）はすべて44pt以上で設計する
- 隣接するボタン間には十分な間隔を確保し、誤タップを防止する

### 1.3 Dynamic Type

- 本アプリはテキスト表示が極めて少ない（ボタンラベル「オフ/オン」程度）
- テキストを表示する場合は、Dynamic Typeの最小サイズ（11pt）を下回らないこと
- ただし、レトロUIのカスタムフォントを使用する場合は`UIFontMetrics`で動的サイズ対応する

### 1.4 コントラスト

- テキスト要素: **4.5:1以上**のコントラスト比を確保
- 非テキスト要素（ボタン、アイコン、状態表示）: **3:1以上**
- レトロUIのグラデーション背景上でもコントラストを確保する
- Xcode Accessibility Inspectorでコントラスト比を検証すること

### 1.5 色だけに頼らない情報伝達

- フラッシュのオン/オフ状態は、色だけでなくテキストラベル（「オフ」「オン」）でも伝える
- カメラ切替の状態も視覚的フィードバック（アイコン変化）で伝える

### 1.6 モーション感度（Reduce Motion）

- 虹彩シャッターアニメーション: `UIAccessibility.isReduceMotionEnabled`が`true`の場合、アニメーションをフェード演出に置き換える
- 白フェード演出: Reduce Motion有効時は省略またはフェード時間を短縮する
- カメラ切替アニメーション: Reduce Motion有効時はクロスフェードに置き換える

---

## 2. プライバシー【準拠】

### 2.1 カメラアクセス許可

- **要求タイミング**: アプリ初回起動直後、カメラ画面表示時に要求する（本アプリはカメラが唯一の機能のため、即時要求が自然）
- **Purpose String（NSCameraUsageDescription）**: 簡潔で具体的に記述する
  - 例: `「iPhone 4風のレトロな写真を撮影するためにカメラを使用します」`
- 拒否時: カメラプレビュー領域にメッセージを表示し、設定アプリへの導線を提供する

### 2.2 フォトライブラリアクセス許可

- **要求タイミング**: 初回撮影時（実際に保存が必要になった瞬間）に要求する
- **Purpose String（NSPhotoLibraryAddUsageDescription）**:
  - 例: `「撮影した写真をカメラロールに保存します」`
- 書き込み専用（`PHPhotoLibrary.authorizationStatus(for: .addOnly)`）を使用し、必要最小限の権限に留める
- サムネイル表示のために読み取りも必要な場合は`NSPhotoLibraryUsageDescription`も設定する

### 2.3 データ最小化

- 収集するデータ: カメラ映像（リアルタイム処理のみ、保存しない）、ジャイロスコープデータ（手ブレ用、一時利用のみ）
- ネットワーク通信: なし（MVP段階）
- アカウント: なし
- トラッキング: なし

---

## 3. レイアウト【一部準拠】

### 3.1 セーフエリア — 準拠

- Dynamic Island、ホームインジケーター、角丸ディスプレイのセーフエリアを尊重する
- ファインダー（カメラプレビュー）はセーフエリアを無視してフルスクリーン表示しても良いが、インタラクティブ要素（ボタン）は必ずセーフエリア内に配置する

### 3.2 画面構成 — 逸脱

現行HIGの推奨レイアウト（ナビゲーションバー + コンテンツ + タブバー）には従わない。

```
┌─────────────────────────┐
│ 上部ツールバー           │ ← iOS 6風（黒〜グレーグラデーション）
│ [フラッシュ]   [カメラ切替] │
├─────────────────────────┤
│                         │
│    ファインダー          │ ← 4:3、リアルタイムフィルター適用
│    （カメラプレビュー）    │
│                         │
├─────────────────────────┤
│ 下部ツールバー           │ ← 黒背景・金属質感
│ [サムネイル] [シャッター]  │
└─────────────────────────┘
```

**逸脱理由**: iOS 4〜6カメラアプリの完全再現がコンセプトのため。

### 3.3 アダプティブレイアウト — 一部準拠

- **ポートレート固定**（横持ち非対応）のため、横向きレイアウトは不要
- ただし、iPhone 12〜16 Pro Maxまでの画面サイズ差に対応するため、Auto Layout/SwiftUIのレイアウトシステムを活用する
- ファインダーの4:3比率は画面幅に応じて動的に計算する

---

## 4. ナビゲーション【逸脱】

### 4.1 ナビゲーション構造

- 本アプリは**単一画面構成**（カメラ画面のみ）のため、ナビゲーションバー・タブバーは使用しない
- サムネイルタップ時のカメラロール遷移は、システムの`PHPickerViewController`または`UIImagePickerController`を使用する（これはHIG準拠）

**逸脱理由**: 単一画面アプリであり、iOS 4〜6のカメラアプリにナビゲーション構造は存在しなかったため。

### 4.2 モーダル表示 — 準拠

- カメラロール表示やアラート（権限拒否時等）はシステム標準のモーダルを使用する
- モーダルのスワイプ解除を妨げない

---

## 5. ジェスチャー【準拠】

### 5.1 システムジェスチャーの保護

以下のシステムジェスチャーを**絶対に上書きしない**:

| ジェスチャー | 機能 |
|---|---|
| 画面下端から上スワイプ | ホーム画面 / App Switcher |
| 画面左上端から下スワイプ | 通知センター |
| 画面右上端から下スワイプ | コントロールセンター |
| 画面左端から右スワイプ | 戻る（本アプリでは対象なし） |

### 5.2 本アプリで使用するジェスチャー

| ジェスチャー | アクション | HIG標準との整合性 |
|---|---|---|
| タップ | シャッター、ボタン操作 | 標準（選択・アクティベート） |
| ピンチ（拡大検討中） | ズーム（Phase 2で検討） | 標準（ズーム） |

### 5.3 カスタムジェスチャー

- MVPではカスタムジェスチャーは使用しない
- すべての操作はボタンタップで完結する
- Phase 2でピンチズームを追加する場合は、ボタンによる代替操作も提供すること

---

## 6. ビジュアルデザイン【逸脱】

本アプリの視覚的デザインは、現行HIGの推奨から大幅に逸脱する。これはプロダクトの核心的価値であり、意図的な設計判断である。

### 6.1 デザイン言語 — 逸脱

| 項目 | 現行HIG | 本アプリ | 理由 |
|---|---|---|---|
| デザイン思想 | フラットデザイン / Liquid Glass | スキューモーフィズム | iOS 4〜6再現 |
| テクスチャ | 使用しない | 金属、革、ガラスの質感 | 当時のUIを再現 |
| グラデーション | 控えめ | 多用（ツールバー、ボタン） | 当時のUIを再現 |
| シャドウ | 控えめ | ドロップシャドウ・ベベル多用 | 立体感の再現 |
| 角丸 | 大きめ（continuous curve） | 小さめ（当時の角丸） | 当時のUIを再現 |

### 6.2 カラー — 逸脱

- システムカラー（`systemBlue`等）は使用しない
- iOS 4〜6時代のカスタムカラーパレットを使用する:
  - ツールバー背景: 黒〜ダークグレーのグラデーション
  - ボタン: 金属質感のグレー系
  - テキスト: 白またはライトグレー
- **ダークモード非対応**: レトロUI自体が常に暗色系デザインのため、ライト/ダークの切替は不要
- **ただし、コントラスト比は現行HIG基準（4.5:1 / 3:1）を満たすこと**（1.4節参照）

### 6.3 タイポグラフィ — 逸脱

- San Franciscoフォントは使用しない
- iOS 4〜6時代に近いフォント（Helvetica Neueまたはカスタムフォント）を使用する
- **テキスト表示は最小限**（「オフ」「オン」程度）なので影響範囲は小さい
- Dynamic Type対応は1.3節に従う

### 6.4 アプリアイコン — 一部準拠

- 1024×1024pxのPNGを提供する（準拠）
- アイコンの角丸はシステムが自動適用する（準拠）
- デザインはiOS 6時代のカメラアイコン風（グラデーション＋レンズ）にする（コンセプト準拠）
- ライトモード / ダークモード / Tintedバリエーションを提供する（準拠）

---

## 7. ステータスバー【逸脱】

### 7.1 方針

- **ステータスバーを非表示にする**
- 画面全体をレトロUIで占有し、没入感を高める

### 7.2 逸脱に対する配慮

- HIGは「ステータスバーの永続的な非表示を強く非推奨」としている
- 本アプリは「タイムスリップ体験」がコンセプトのため、ステータスバーの非表示は体験の重要な要素である
- ユーザーは通知センター（上端スワイプ）やコントロールセンターで時刻・バッテリー情報にアクセスできるため、実用上の問題は軽微

### 7.3 実装

```swift
override var prefersStatusBarHidden: Bool { true }
```

---

## 8. 起動画面（Launch Screen）【一部準拠】

### 8.1 HIG原則

- 起動画面はアプリの最初の画面にできるだけ似せること
- テキスト、ブランディング、ロゴを含めないこと
- スプラッシュスクリーンとして使わないこと

### 8.2 本アプリでの適用

- 起動画面は**カメラ画面の静的なプレースホルダー**にする
- レトロUIのツールバー背景色（上部: ダークグレー、下部: 黒）とファインダー領域（黒）で構成
- カメラプレビューやボタンは含めない（動的要素のため）
- これにより、起動→カメラ画面の遷移がシームレスに見える

---

## 9. フィードバック【一部準拠】

### 9.1 触覚フィードバック（Haptics）— 準拠

| アクション | Haptic | 種類 |
|---|---|---|
| シャッタータップ | `UIImpactFeedbackGenerator(.medium)` | 撮影の物理的感触 |
| フラッシュ切替 | `UIImpactFeedbackGenerator(.light)` | 軽い切替感 |
| カメラ切替 | `UIImpactFeedbackGenerator(.medium)` | 切替の感触 |

- Hapticはレトロ/モダン関係なくユーザー体験を向上させるため、現行HIG通り実装する
- 過度なHapticは避ける（HIGの「抑制」原則に従う）

### 9.2 サウンドフィードバック — 一部準拠

- シャッター音: iPhone 4のシャッター音に近いサウンドエフェクトを使用
- 消音モードに関係なく常に鳴らす（日本市場の法的要件）
- シャッター音とHapticを同期させる（HIGの「調和」原則）

### 9.3 視覚的フィードバック — 逸脱（レトロ演出）

- 虹彩シャッターアニメーション（iOS 4〜6再現）
- 撮影後の白フェード演出
- これらはレトロ体験の一部であり、現行HIGの「控えめなアニメーション」原則から逸脱する
- ただし、Reduce Motion設定は尊重する（1.6節参照）

---

## 10. モーション / アニメーション【一部準拠】

### 10.1 準拠する原則

- **目的のあるアニメーション**: すべてのアニメーションに意味を持たせる（装飾のためだけのアニメーションは追加しない）
- **スプリングアニメーション**: カメラ切替やUI遷移にはスプリングアニメーションを使用する
- **Reduce Motion対応**: 1.6節に従い、代替のフェード演出を用意する

### 10.2 逸脱する点

- 虹彩シャッターアニメーションはHIGの「素早く控えめなアニメーション」原則より派手だが、レトロ体験の核心的演出であるため実装する
- ただし、アニメーション時間は0.3〜0.5秒以内に収め、ユーザーの撮影テンポを妨げない

---

## 11. マテリアル / ブラー【逸脱】

- 現行HIGのマテリアル（`UIVisualEffectView`、バイブランシー）は使用しない
- 代わりに、iOS 4〜6時代のグラデーション・テクスチャ・不透明な背景を使用する

**逸脱理由**: マテリアルシステムはiOS 7以降のフラットデザインの要素であり、スキューモーフィズムUIには不適合。

---

## 12. シート / モーダル【準拠】

- 本アプリ自体のUI内でシートは使用しない
- カメラロール表示など、システム提供のモーダルはそのまま使用する（カスタマイズしない）
- システムモーダルのスワイプ解除を妨げない

---

## 13. 画像アセット【準拠】

### 13.1 スケールファクター

- すべてのカスタムアセット（テクスチャ、ボタン画像、アイコン）は@2xと@3xを提供する
- @1xは不要（iPhone 12以降はすべてRetina以上）

### 13.2 アセットカタログ

- `Images.xcassets`にすべての画像アセットを格納する
- ベクター（PDF/SVG）が使える要素はベクターを優先する
- スキューモーフィズムのテクスチャ（金属、革等）はラスター画像（PNG）で提供する

### 13.3 SF Symbols

- 本アプリではSF Symbolsは原則使用しない（レトロUIに合わないため）
- ただし、システムモーダル内ではシステムがSF Symbolsを使用する（問題なし）

---

## Appendix A: 汎用UIコンポーネント HIGリファレンス

以下は特定アプリに依存しない、iOSアプリ全般に適用されるHIGの基本ルールである。
本アプリではスキューモーフィズムUIのため直接使用しないコンポーネントも含まれるが、システムモーダルやアラート等で間接的に関わるため、知識として整理しておく。

### A.1 ボタン

#### スタイル（SwiftUI）

| スタイル | 外観 | 用途 |
|---|---|---|
| `bordered` | 枠線あり | 汎用的な標準ボタン |
| `borderedProminent` | 塗りつぶし | 画面内で最も目立たせたいアクション |
| `borderless` | 枠線なし | インラインやリスト内のアクション |
| `plain` | 装飾なし | 最小限のスタイル |

#### スタイル（UIKit — iOS 15+）

| Configuration | 外観 | 用途 |
|---|---|---|
| `.filled()` | tintカラーで塗りつぶし | プライマリアクション |
| `.tinted()` | tintカラーの薄い背景 | セカンダリアクション |
| `.gray()` | グレー背景 | 補助的アクション |
| `.plain()` | 背景なし | テキストリンク風 |

#### ロール

| ロール | 意味 | 表示 |
|---|---|---|
| Normal | デフォルト | 標準スタイル |
| Primary | ユーザーが最も選びやすいアクション | 太字、右側に配置 |
| Cancel | 現在の操作を取り消す | 左側に配置 |
| Destructive | 破壊的操作（削除等） | 赤色で表示 |

#### サイジングと配置

- **最小タップ領域: 44×44pt**（すべてのタッチベースプラットフォーム共通）
- ラベルは1〜2語で「結果」を記述する動詞・動詞句にする（例: 「削除」「送信」「すべて表示」）
- 単純な承認には「OK」を使う。「はい」「いいえ」は避ける
- **最も選ばれやすいボタンを右側**に配置する
- **キャンセルは常に左側**
- 破壊的ボタンは他のボタンと視覚的に分離し、24〜32ptの間隔を空ける

#### ボタンの状態

| 状態 | 説明 | 視覚的表現 |
|---|---|---|
| Normal | デフォルト状態 | 標準の色・不透明度 |
| Highlighted | タップ中 | やや暗くなる / ハイライト表示 |
| Disabled | 操作不可 | 薄くグレーアウト（不透明度0.3〜0.4程度） |
| Focused | フォーカス中（tvOS/キーボード） | 枠線や影でフォーカス表示 |

---

### A.2 アラート

#### 使用場面

- 購入の確認
- 破壊的操作の確認（削除等）
- 問題の通知（エラー、接続失敗等）

#### ベストプラクティス

- ボタンは**最大2つ**に制限する。3つ以上はアクションシートを検討する
- 破壊的アクションのアラートでは:
  - 破壊的ボタンに`.destructive`スタイルを適用する
  - 「キャンセル」ボタンを必ず提供する
  - **キャンセルをデフォルト（太字）ボタン**にする（誤操作防止）
- タイトルは簡潔に。本文で補足する
- アラートは割り込みであるため、本当に必要な場面でのみ使用する

#### 実装例（SwiftUI）

```swift
.alert("写真を削除しますか？", isPresented: $showAlert) {
    Button("削除", role: .destructive) { deletePhoto() }
    Button("キャンセル", role: .cancel) { }
} message: {
    Text("この操作は取り消せません。")
}
```

---

### A.3 アクションシート

#### アラートとの使い分け

| 状況 | 使うべきコンポーネント |
|---|---|
| エラー通知、問題の報告 | アラート |
| 破壊的操作の確認（選択肢2つ） | アラート |
| ユーザーが起こしたアクションに対する選択肢提示（3つ以上） | アクションシート |
| 操作の中断を伴わない選択肢 | アクションシート |

#### ベストプラクティス

- アクションシートには常に「キャンセル」を含める
- 破壊的オプションには`.destructive`スタイルを適用する
- 選択肢は論理的な順序で並べる（最も使われるものを上に）

---

### A.4 カラーシステム

#### システムカラー

自動的にライト/ダークモードに適応する標準カラー:

| カラー | 用途 |
|---|---|
| `systemRed` | エラー、破壊的アクション |
| `systemOrange` | 警告 |
| `systemYellow` | 注意 |
| `systemGreen` | 成功、確認 |
| `systemBlue` | デフォルトtint、リンク、インタラクティブ要素 |
| `systemPurple` | アクセント |
| `systemPink` | アクセント |
| `systemTeal` | 情報 |
| `systemIndigo` | アクセント |
| `systemMint` | アクセント |
| `systemCyan` | 情報 |
| `systemBrown` | アクセント |

#### セマンティックカラー（背景）

| カラー | 用途 |
|---|---|
| `systemBackground` | 主要な背景色 |
| `secondarySystemBackground` | グループ内のセクション背景 |
| `tertiarySystemBackground` | 第3レベルの背景 |
| `systemGroupedBackground` | グループ化テーブルの背景 |
| `secondarySystemGroupedBackground` | グループ化テーブル内のセル背景 |
| `tertiarySystemGroupedBackground` | 第3レベルのグループ背景 |

#### セマンティックカラー（前景 / ラベル）

| カラー | 用途 | 不透明度目安 |
|---|---|---|
| `label` | 主要テキスト | 100% |
| `secondaryLabel` | 補助テキスト | 60% |
| `tertiaryLabel` | プレースホルダー等 | 30% |
| `quaternaryLabel` | 最も薄いテキスト | 18% |
| `separator` | 標準区切り線 | — |
| `opaqueSeparator` | 不透明な区切り線 | — |

#### コントラスト要件（再掲）

| 対象 | 最小コントラスト比 |
|---|---|
| 通常テキスト | 4.5:1 |
| 大きなテキスト（18pt以上、または14pt太字以上） | 3:1 |
| 非テキスト要素（アイコン、コントロール） | 3:1 |

#### カラー使用の原則

- **色だけで情報を伝えない** — 必ずアイコン、パターン、テキストを併用する
- **赤/緑の組み合わせを避ける** — 色覚異常（男性の約8%）への配慮
- アクセント/tintカラーはライト・ダーク両モードで機能するものを選ぶ
- `Increase Contrast`設定ON時のテストも行う

---

### A.5 タイポグラフィ

#### San Francisco フォントファミリー

| フォント | 最適サイズ | 用途 |
|---|---|---|
| SF Pro Text | 19pt以下 | 本文、小さなテキスト |
| SF Pro Display | 20pt以上 | 見出し、大きなテキスト |
| SF Pro Rounded | 全サイズ | 丸みのあるバリエーション |
| SF Mono | 全サイズ | コード、等幅テキスト |

ウェイト: Ultralight, Thin, Light, Regular, Medium, Semibold, Bold, Heavy, Black（9段階）

#### Dynamic Type テキストスタイル

| スタイル | デフォルトサイズ | ウェイト | 用途 |
|---|---|---|---|
| `largeTitle` | 34pt | Regular | 画面タイトル（大） |
| `title1` | 28pt | Regular | セクションタイトル |
| `title2` | 22pt | Regular | サブセクションタイトル |
| `title3` | 20pt | Regular | 小見出し |
| `headline` | 17pt | **Semibold** | 強調テキスト、見出し |
| `body` | 17pt | Regular | 本文（デフォルト） |
| `callout` | 16pt | Regular | 注釈、補足テキスト |
| `subheadline` | 15pt | Regular | 副見出し |
| `footnote` | 13pt | Regular | 脚注、タイムスタンプ |
| `caption1` | 12pt | Regular | キャプション |
| `caption2` | 11pt | Regular | 最小キャプション（これ以下に縮小されない） |

#### Dynamic Type 実装

```swift
// UIKit
label.font = UIFont.preferredFont(forTextStyle: .body)
label.adjustsFontForContentSizeCategory = true

// カスタムフォントでDynamic Type対応
let metrics = UIFontMetrics(forTextStyle: .body)
label.font = metrics.scaledFont(for: customFont)

// SwiftUI
Text("テキスト")
    .font(.body)  // 自動的にDynamic Type対応
```

#### 可読性のガイドライン

- 本文テキストの標準は**17pt**（San Francisco body）
- 行の高さはフォントサイズの**1.3倍以上**
- 1行あたり**35〜50文字**が最適な可読性
- 最小マージン（テキスト周囲のパディング）は**8pt**

---

### A.6 プログレスインジケーター

#### 種類

| 種類 | 用途 | 例 |
|---|---|---|
| Determinate（確定的） | 所要時間が予測可能なタスク | ファイルダウンロード、アップロード |
| Indeterminate（不確定的） | 所要時間が予測不可能なタスク | データ同期、検索中 |

#### ベストプラクティス

- インジケーターは常に**動いている状態**にする（停止するとアプリがフリーズしたように見える）
- 「読み込み中...」のような曖昧な表現ではなく、具体的に何をしているか記述する
- インジケーターはタスク完了後に即座に消す

#### アクティビティインジケーター

```swift
// SwiftUI
ProgressView()          // 不確定（スピナー）
ProgressView(value: 0.7) // 確定的（バー、70%）

// UIKit
let spinner = UIActivityIndicatorView(style: .medium)
spinner.startAnimating()
```

---

### A.7 SF Symbols

#### 概要

- **6,900以上のシンボル**を含むApple公式アイコンライブラリ
- San Franciscoフォントと同じウェイト・スケールシステムを共有
- テキストと完璧にベースライン整列する

#### ウェイト（9段階）

Ultralight → Thin → Light → Regular → Medium → Semibold → Bold → Heavy → Black

**ルール**: 隣接するテキストのフォントウェイトとシンボルのウェイトを一致させる

#### スケール（3段階）

| スケール | 用途 |
|---|---|
| Small | コンパクトな文脈 |
| Medium（デフォルト） | 標準的な使用 |
| Large | 強調したい場面 |

#### レンダリングモード

| モード | 説明 | 用途 |
|---|---|---|
| Monochrome | 全レイヤーに1色 | シンプルなアイコン |
| Hierarchical | 1色＋レイヤーごとに不透明度変化 | 奥行き・強調表現 |
| Palette | レイヤーごとに異なる色 | ブランドカラーの適用 |
| Multicolor | 定義済みのフルカラー | 天気、ファイルタイプ等 |

#### 実装例

```swift
// SwiftUI
Image(systemName: "camera.fill")
    .symbolRenderingMode(.hierarchical)
    .font(.title2)
    .foregroundStyle(.blue)

// UIKit
let config = UIImage.SymbolConfiguration(pointSize: 24, weight: .medium)
let image = UIImage(systemName: "camera.fill", withConfiguration: config)
```

---

### A.8 Haptic フィードバック

#### フィードバックジェネレーター

**UIImpactFeedbackGenerator（物理的衝撃）**

| スタイル | 感触 | 使用場面 |
|---|---|---|
| `.light` | 軽い衝突 | 軽量なUI操作、微小な切替 |
| `.medium` | 中程度の衝撃 | スナップ、標準的なタップ確認 |
| `.heavy` | 重い衝撃 | 重要な操作、力強いアクション |
| `.rigid` | 硬く鋭い | ロック、確定的な切替 |
| `.soft` | 柔らかい | 柔軟なインタラクション |

**UINotificationFeedbackGenerator（通知）**

| タイプ | 使用場面 |
|---|---|
| `.success` | タスク完了、保存成功 |
| `.warning` | 注意が必要な状態 |
| `.error` | 操作失敗、エラー発生 |

**UISelectionFeedbackGenerator（選択変更）**

- ピッカー、スクロールホイールの値変更時に使用

#### 設計原則

| 原則 | 説明 |
|---|---|
| 因果性（Causality） | 何がHapticを引き起こしたのか明確にする |
| 調和（Harmony） | サウンド・Haptic・視覚を同期させる |
| 有用性（Utility） | ユーザー視点で価値があるか考える |
| 抑制（Restraint） | 付けないほうが良い場面もある。本当に必要な箇所のみ |

#### 実装例

```swift
// 事前準備（レイテンシー削減のため）
let generator = UIImpactFeedbackGenerator(style: .medium)
generator.prepare()

// 実行
generator.impactOccurred()
```

---

### A.9 ダークモード

#### 基本原則

- iOSはシステム全体でライト/ダークの外観を切り替える
- アプリはデフォルトで**両モードをサポート**すべき
- セマンティックカラー（A.4節）を使えば自動的に対応される

#### 実装のポイント

- ハードコードされた色（`UIColor.white`等）ではなく、セマンティックカラー（`UIColor.systemBackground`等）を使う
- Asset Catalogで「Any / Light / Dark」のバリアントを設定する
- ダークモードではグレー・オン・ブラックのテキストに注意（低視力ユーザーにはコントラスト不足になりやすい）
- `Increase Contrast` ON + ダークモードの組み合わせでテストする

#### 特定画面のみオーバーライド

```swift
// SwiftUI
.preferredColorScheme(.dark)

// UIKit（View単位）
overrideUserInterfaceStyle = .dark
```

---

## 準拠/逸脱サマリー

| HIGセクション | 方針 | 備考 |
|---|---|---|
| アクセシビリティ | **準拠** | VoiceOver、タッチターゲット44pt、コントラスト比、Reduce Motion |
| プライバシー | **準拠** | カメラ/フォトライブラリ権限、Purpose String、データ最小化 |
| レイアウト | **一部準拠** | セーフエリアは準拠、画面構成はiOS 4〜6風に逸脱 |
| ナビゲーション | **逸脱** | 単一画面のためナビバー/タブバー不使用 |
| ジェスチャー | **準拠** | システムジェスチャー保護、標準ジェスチャーのみ使用 |
| ビジュアルデザイン | **逸脱** | スキューモーフィズム（プロダクトの核心的価値） |
| ステータスバー | **逸脱** | 非表示（没入型レトロ体験） |
| 起動画面 | **一部準拠** | カメラ画面に似せた静的プレースホルダー |
| フィードバック | **一部準拠** | Hapticは準拠、視覚演出はレトロ仕様 |
| モーション | **一部準拠** | Reduce Motion準拠、虹彩アニメーションは例外 |
| マテリアル | **逸脱** | ブラー不使用、テクスチャ/グラデーション使用 |
| シート/モーダル | **準拠** | システムモーダルをそのまま使用 |
| 画像アセット | **準拠** | @2x/@3x提供、アセットカタログ使用 |
